# 문제 회고
문제를 풀면서 생각을 엄청많이 하게되었던 문제이다.

문제를 풀며 공부한 내용을 [블로그](https://velog.io/@iamdragon/posts)에 기록해 두었다.

### 첫번째 시도
첫 시도에서 두가지를 정의하고 접근해봤다.

1. 어떠한 testcase에도 변하지 않는 rule로 왼쪽변과 오른쪽변은 가장 첫데이터, 마지막 데이터의 y 값이다.
2. 결국 다각형의 넓이 = 밑넓이의 합 * 높이의 합이다.

### 실패
하지만 정의와 동시에 틀린 정의가 되었다.

다각형은 직사각형이나 정사각형이 아닌 어떠한 모향으로도 존재할 수 있고, 가령 직사각형, 정사각형이 아니라면 우리가 생각하는 사각형 넓이를 구하는 공식으로는 답을 구 할 수 없다.

### 두번째 시도
두번째로 다각형을 여러 사각형들의 합으로 보면 어떨까? 라는 생각을 하게 되었다.

이번 시도에서는 아래와 같은 생각을 해보았다.

1. 가장 높은 기둥의 y 값을 기억하고, 이 기둥을 기준으로 한다. total에 값을 저장하고, 가장높은 기둥의 넓이는 y 가 되게 되므로 total = y 로 선언한다.
2. 두 번째로 높은 기둥을 찾는다.
3. |가장 높은 기둥의 x값 - 두번째로 높은 기둥의 x값| 을 계산하고 y를 곱해 total에 더한다. (total += y)
4. 위의 과정을 반복한다. -> 양끝의 기둥들이 나올때까지

### 실패
이 방법도 결국 실패했다.

두가지 원인이 존재했다.

1. x값이 고정이 아니고 n번째 높은 기둥과 n-1번째 높은 기둥을 비교할 수 있어야 했다.
2. 높은 기둥 왼쪽에 만약 다음 기둥이 있다면 x+1을 기준으로하던 높은 기둥의 x값을 x로 수정해야했다.

테스트케이스에서는 여러 형태의 예시들이 들어갈텐데 내가 생각한 두번째 방법은 해당 케이스들을 넘기위해 너무 코드가 복잡해질 것 같았다.

### 세번째 시도
두번째 방법의 초반부분은 가져가되, 새로운 방법을 또 생각해봤다.

1. 가장 높은 기둥을 기억한다.
2. 가장 높은 기둥을 기준으로 왼쪽 부분의 기둥들을 왼쪽에서 오른쪽 방향으로 탐색한다.
   2-1. y값이 작으면 무시하고 크다면 해당 지점까지의 면적을 구해 total에 합산한다.
3. 가장 높은 기둥이 나올때까지 반복한다.
4. 가장 높은 기둥의 오른쪽 부분또한 왼쪽 방향으로 2번과정을 3번까지 수행한다.

```java
private static int left(TreeMap<Integer, Integer> map, Map.Entry<Integer, Integer> highestEntry) {
        int total = 0;
        int maxHeight = 0;
        int prevX = map.firstKey();

        for (Map.Entry<Integer, Integer> entry : map.headMap(highestEntry.getKey(), true).entrySet()) {
            int curX = entry.getKey();
            int curHeight = entry.getValue();


            if (curHeight >= maxHeight){
                total += (curX - prevX) * maxHeight;
                maxHeight = Math.max(maxHeight, curHeight);
                prevX = curX;
            }

        }
        
        return total;
    }
```

가장 높은 기둥을 기준으로 왼쪽 부분의 넓이를 계산할때 사용한 코드이다.

자료 구조는 정렬을 자동으로 수행하며 키/값 쌍으로 데이터 저장이 가능한 treemap을 사용했고, 내부메소드로 headMap을 사용해 불필요한 순회를 줄일 수 있었다.

### 성공
결과적으로 모든 테스트 케이스 및 내가 만든 테스트 케이스들을 통과하고 정답까지 도달하게 되었다.

이번 문제를 통해 treemap에 내부 메소드에 대해 공부해 볼 수 있었다.

해당 공부내용은 [블로그](https://velog.io/@iamdragon/posts)에 적어두겠다.
